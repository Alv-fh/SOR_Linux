#Lo primero es actualizar el sistema e instalar bind9 bind9-utils
#Instalar isc-dhcp-server
sudo apt-get update; sudo apt-get install isc-dhcp-server bind9 bind9-utils -y

#GENERAR CLAVE PRIVADA
ddns-confgen -K DDNS_UPDATE

#CREAR FICHERO ddns.key CON LA KEY GENERADA
nano ddns.key
  
key "DDNS_UPDATE" {
	algorithm hmac-sha256;
	secret "QeLzAxeNijfhulRQS4bnlxBgSkuPq+giZF83MxdfjQs=";
};
  
#COPIAR CLAVE AL SERVICIO BIND Y DHCP
cp ddns.key /etc/bind
cp ddns.key /etc/dhcp

#CAMBIAR PERMISOS
chown root:bind /etc/bind/ddns.key
chown root:root /etc/dhcp/ddns.key
chmod 640 /etc/bind/ddns.key
chmod 640 /etc/dhcp/ddns.key

#CONFIGURACIÃ“N DE DNS
nano /etc/bind/named.conf.local

include "/etc/bind/ddns.key";

zone "micentro.edu"{
  type master;
  notify no;
  file "/var/cache/bind/db.micentro.edu";
  allow-update { key DDNS_UPDATE; };
};
zone "3.168.193.addr-in.arpa"{
    type master;
    notify no;
    file "/var/cache/bind/db.3.168.193";
    allow-update { key DDNS_UPDATE; };
};

#CREAR DIRECTORIO ZONAS
mkdir /etc/bind/zonas

#COPIAR DB.EMPTY
cp /etc/bind/db.empty zonas/db.micentro.edu
cp /etc/bind/db.empty zonas/db.3.193.168

#CONFIGURAR ZONA DIRECTA E INVERSA
nano /etc/bind/zonas/db.micentro.edu

; BIND reverse data file for empty rfc1918 zone
;
; DO NOT EDIT THIS FILE - it is used for multiple zones.
; Instead, copy it, edit named.conf, and use that copy.
;
$TTL    86400
@       IN      SOA      micentro.edu.  root.micentro.edu.
                            1        ; Serial
                       604800        ; Refresh
                        86400        ; Retry
                      2419200        ; Expire
                        86400 )      ; Negative Cache TTL






  




  
  
